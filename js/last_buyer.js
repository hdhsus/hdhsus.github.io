var lb_popup={setTimeOutBuyers:false,setTimeOutClear:false,count:0,setSecTimeInitial:8,setSecTimeMin:7,setSecTimeMax:15,setSecTimeClear:5,clients:[],words:[],init:function(){lb_popup.get_last_buyers();$('select, input').on('focus',function(){if($(window).width()<=767){lb_popup.stop();}});},get_last_buyers:function(){$.ajax({url:zdir+"/sideload/last_buyers/"+cc,dataType:"json",type:'GET',success:function(result){if(typeof result=='object'){var clients=result.clients;var words=result.words;lb_popup.clients=clients;lb_popup.words=result.words;lb_popup.show_hide_process();}},});},get_next_buyer:function(){var client=lb_popup.clients[lb_popup.count];if(client){lb_popup.count+=1;return client;}},change_buyer:function(){var client=lb_popup.get_next_buyer();if(client){$('#custom_last_buyer .lb-name').html(client['name']);$('#custom_last_buyer .lb-location').html(client['city']);$('#custom_last_buyer .lb-just-placed').html(lb_popup.words['just_placed']);$('#custom_last_buyer .lb-from').html(lb_popup.words['from']);$('#custom_last_buyer').removeClass('lb-custom-fade-out').addClass('lb-custom-fade-in');clearTimeout(lb_popup.setTimeOutClear);lb_popup.setTimeOutClear=setTimeout(function(){$('#custom_last_buyer').removeClass('lb-custom-fade-in').addClass('lb-custom-fade-out');lb_popup.show_hide_process();},lb_popup.setSecTimeClear*1000);}},show_hide_process:function(){if(lb_popup.count==0){var Tlength=lb_popup.setSecTimeInitial;clearTimeout(lb_popup.setIntervalBuyers);}else{var Tlength=Math.floor(Math.random()*(lb_popup.setSecTimeMax-lb_popup.setSecTimeMin+1))+lb_popup.setSecTimeMin;}
lb_popup.setTimeOutBuyers=setTimeout(function(){if(lb_popup.count>=lb_popup.clients.length){lb_popup.stop();}
if($('#custom_last_buyer').hasClass('lb-custom-fade-in')){$('#custom_last_buyer').removeClass('lb-custom-fade-in').addClass('lb-custom-fade-out');}else{lb_popup.change_buyer();}},Tlength*1000);},stop:function(){if(lb_popup.setIntervalBuyers){if($('#custom_last_buyer').hasClass('lb-custom-fade-in')){$('#custom_last_buyer').removeClass('lb-custom-fade-in').addClass('lb-custom-fade-out');}
clearInterval(lb_popup.setIntervalBuyers);}},}
$(function(){lb_popup.init();});